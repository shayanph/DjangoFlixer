<!DOCTYPE html>
<html lang="en">
	<head>
        {% load static %}

		<title>index</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.min.css' %}">
		<link rel="stylesheet" type = "text/css" href="{% static 'css/bootstrap.min.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'css/styleUser.css' %}">
	</head>
	<body>
		<div class="main">
			<header class="header">
				<nav class="navbar navbar-expand-lg navbar-light py-3">
				  <a class="navbar-brand" href="#" style="font-size: 15px;"><strong>MyFlixer</strong></a>
				  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				    <span class="navbar-toggler-icon"></span>
				  </button>

				  <div class="collapse navbar-collapse" id="navbarSupportedContent">
				    <ul class="navbar-nav ml-auto" id ="centerUl">
							<li class="nav-item">
				        <a class="nav-link px-3" href="{% url 'Flixer:home' %}">Home</a>
				      </li>
				      <li class="nav-item active">
				        <a class="nav-link px-3" href="{% url 'Flixer:user-page' %}">Edit user</a>
				      </li>
				      <li class="nav-item">
				        <a class="nav-link px-3" href="{% url 'Flixer:movie-page' %}">Edit Movies</a>
				      </li>
                      <li class="nav-item" style="align-self: center">
                          <button class = "buttonSearch" onclick = "show()"><i class ="fa fa-search" ></i></button>
                          <div id = "hiddenForm" style = "display: none ; align-self: center">
                              <form action="{% url 'Flixer:movie-search' %}" method="post" class = "searchBarHeader">
                                  {% csrf_token %}
                                  <input type="text" name="search" placeholder="Enter movie name..">
                              </form>
                          </div>
				      </li>
				    </ul>
				  </div>
				</nav>
			</header>

			<div class="content">
				<div class="container-fluid">
                    <div class = "userTable">
                        <table class = "table table-hover table-bordered">
                            <thead class = "thead-dark">
                                <tr>
                                    <th>User Id</th>
                                    <th>User Name</th>
                                    <th>User Email</th>
                                    <th></th>
                                    <th></th>
                                    <th>
                                        <form action="{% url 'Flixer:user-add' %}" method="post">
                                            {% csrf_token %}
                                            <button class = "btn btn-success" style="width: 100%;">
                                                Add User
                                                <i class = "fa fa-plus-circle"> </i>
                                            </button>
                                        </form>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for lines in userData %}
                                <tr>
                                        <td>{{ lines.user_id}}</td>
                                        <td>{{ lines.name}}</td>
                                        <td>{{ lines.email}}</td>
                                        <td></td>
                                        <td></td>
                                        <td id = "buttonGroup" style = "display: flex; justify-content: space-evenly;">
                                        <form class = "buttonGroupForm" id = "editform">
                                            <input hidden name = "user_id" value = {{ lines.user_id }}>
                                            <button class = "btn btn-outline-primary"><i class = "fa fa-edit"></i></button>
                                        </form>

                                        <form class = "buttonGroupForm" id = "deleteform" onsubmit = "return checkDelete()">
                                            <input hidden name = "user_id" value = {{ lines.user_id }}>
                                            <button class = "btn btn-outline-danger" type="submit" ><i class = "fa fa-remove"></i></button>
                                        </form>
                                        </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
				</div>
			</div>

			<footer class="page-footer font-small pt-4">
			  <div class="footer-copyright">
						<div class="linkcopy">
							<a href="#">Â© 2020 Copyright.Made by Shayan Asghar</a>
						</div>
						<div class="icons">
							<a href="#" class="fa fa-facebook"></a>
							<a href="#" class="fa fa-instagram"></a>
							<a href="#" class="fa fa-twitter"></a>
						</div>
				</div>
			</footer>
        </div>
</body>
<script>
    function show(){
        if (document.getElementById('hiddenForm').style.display === "none"){
            document.getElementById('hiddenForm').style.display = 'inline-block';
        }
        else{
            document.getElementById('hiddenForm').style.display = 'none';
        }
    }
    function checkDelete(){
        return confirm("Are you sure you want to delete the user?");
    }
</script>
</html>